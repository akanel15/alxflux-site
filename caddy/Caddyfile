{
  email alex.kanellis@me.com
}

alxflux.duckdns.org {
  # Serve favicon
  handle /favicon.svg {
    root * /var/www/html
    file_server
  }
  
  # Serve static assets (CSS, JS, etc.)
  handle /_astro/* {
    root * /var/www/html
    file_server
  }
  
  # Serve AlxFlux landing page at /home
  handle_path /home/* {
    root * /var/www/html
    file_server
  }
  
  # Everything else goes to Miniflux RSS reader (main service)
  reverse_proxy app:8080
  
  # Enable compression
  encode gzip
  
  # Security headers
  header {
    # Remove server header
    -Server
    # Security headers
    X-Content-Type-Options nosniff
    X-Frame-Options DENY
    X-XSS-Protection "1; mode=block"
    Referrer-Policy strict-origin-when-cross-origin
  }
  
  # Handle common static assets with caching
  @static {
    path *.css *.js *.png *.jpg *.jpeg *.gif *.ico *.svg *.woff *.woff2
  }
  header @static {
    Cache-Control "public, max-age=31536000"
  }
}
